---
title: "WebSocketå…¥é–€ - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã®åŸºç¤"
chapter: 1
description: "WebSocketã¨ã¯ä½•ã‹ã€ãªãœå¿…è¦ãªã®ã‹ã‚’å­¦ã³ã€æœ€åˆã®WebSocketæ¥ç¶šã‚’ä½“é¨“ã—ã¾ã™"
estimatedTime: "1-2æ™‚é–“"
---

<script lang="ts">
  // Svelte 5å¯¾å¿œã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
  import WebSocketDemo from '$lib/components/WebSocketDemo.svelte';
  import type { ConnectionState } from '$lib/types/websocket';
  
  // ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã®å¤‰æ•°ã‚’propsã¨ã—ã¦å—ã‘å–ã‚Š
  let title = "WebSocketå…¥é–€ - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã®åŸºç¤";
  let chapter = 1;
  
  // ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹
  let demoConnected = $state(false);
  let connectionState = $state<ConnectionState>('disconnected');
</script>

<style>
  :global(body) {
    font-family: system-ui, -apple-system, sans-serif;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    color: #1a202c;
  }
  
  :global(h1) {
    color: #2d3748;
    border-bottom: 2px solid #ff3e00;
    padding-bottom: 0.5rem;
  }
  
  :global(h2) {
    color: #2d3748;
    margin-top: 2rem;
  }
  
  :global(table) {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
  }
  
  :global(th, td) {
    border: 1px solid #e2e8f0;
    padding: 0.75rem;
    text-align: left;
  }
  
  :global(th) {
    background: #f7fafc;
    font-weight: 600;
  }
  
  :global(code) {
    background: #f1f5f9;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-family: 'SF Mono', 'Monaco', monospace;
  }
  
  :global(pre) {
    background: #2d3748;
    color: #f7fafc;
    padding: 1.5rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
  }
  
  :global(pre code) {
    background: none;
    color: inherit;
    padding: 0;
  }
  
  :global(blockquote) {
    border-left: 4px solid #3b82f6;
    background: #f8fafc;
    margin: 1.5rem 0;
    padding: 1rem 1.5rem;
    border-radius: 0 0.5rem 0.5rem 0;
  }
  
  .chapter-header {
    text-align: center;
    margin-bottom: 3rem;
    padding: 2rem;
    background: #f8fafc;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
  }
  
  .chapter-badge {
    display: inline-block;
    background: #ff3e00;
    color: white;
    padding: 0.375rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
</style>

<div class="chapter-header">
  <div class="chapter-badge">Chapter {chapter}</div>
  <h1>{title}</h1>
  <p><strong>æ¨å®šæ™‚é–“:</strong> 1-2æ™‚é–“</p>
</div>

## ğŸ“– å­¦ç¿’ç›®æ¨™

ã“ã®ç« ã‚’å®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

- [ ] WebSocketã®åŸºæœ¬æ¦‚å¿µã‚’èª¬æ˜ã§ãã‚‹
- [ ] HTTPã¨WebSocketã®é•ã„ã‚’ç†è§£ã—ã¦ã„ã‚‹
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã§WebSocketæ¥ç¶šã‚’å®Ÿè¡Œã§ãã‚‹
- [ ] WebSocketã®é©ç”¨å ´é¢ã‚’åˆ¤æ–­ã§ãã‚‹

## ğŸ” WebSocketã¨ã¯ï¼Ÿ

**WebSocket**ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã¨ã‚µãƒ¼ãƒãƒ¼é–“ã§**åŒæ–¹å‘ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**ã‚’å¯èƒ½ã«ã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

å¾“æ¥ã®HTTPã§ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã„ã†ä¸€æ–¹å‘ã®é€šä¿¡ã§ã—ãŸã€‚ã—ã‹ã—ã€WebSocketã§ã¯ä¸€åº¦æ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã‚‹ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ãŒè‡ªç”±ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€å—ä¿¡ã§ãã¾ã™ã€‚

### HTTPã¨WebSocketã®é•ã„

| ç‰¹å¾´ | HTTP | WebSocket |
|------|------|-----------|
| **é€šä¿¡æ–¹å‘** | ä¸€æ–¹å‘ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆâ†’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰ | åŒæ–¹å‘ |
| **æ¥ç¶š** | ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã«é–‹é–‰ | æ°¸ç¶šçš„ãªæ¥ç¶š |
| **ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰** | é«˜ã„ï¼ˆæ¯å›ãƒ˜ãƒƒãƒ€ãƒ¼é€ä¿¡ï¼‰ | ä½ã„ï¼ˆæœ€åˆã ã‘ãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯ï¼‰ |
| **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§** | ä½ã„ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ãŒå¿…è¦ï¼‰ | é«˜ã„ï¼ˆå³åº§ã«é€å—ä¿¡ï¼‰ |
| **ReadyState** | ãªã— | 4ã¤ã®çŠ¶æ…‹ï¼ˆ0-3ï¼‰ã§ç®¡ç† |

## ğŸš€ å®Ÿéš›ã«ä½“é¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†

ä¸‹ã®ãƒ‡ãƒ¢ã§WebSocketæ¥ç¶šã‚’è©¦ã—ã¦ãã ã•ã„ï¼š

<WebSocketDemo 
  serverUrl="wss://echo.websocket.org"
  autoConnect={false}
  showLogs={true}
/>

> **è§£èª¬**: ä¸Šè¨˜ã¯å®Ÿéš›ã«å‹•ä½œã™ã‚‹WebSocketã‚¨ã‚³ãƒ¼ã‚µãƒ¼ãƒãƒ¼ï¼ˆ`wss://echo.websocket.org`ï¼‰ã§ã™ã€‚é€ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãã®ã¾ã¾è¿”ã£ã¦ãã¾ã™ã€‚

## ğŸ’¡ ã“ã“ã§ä½•ãŒèµ·ã“ã£ã¦ã„ã‚‹ã‹ï¼Ÿ

WebSocketæ¥ç¶šã§ã¯ä»¥ä¸‹ã®æµã‚Œã§é€šä¿¡ãŒè¡Œã‚ã‚Œã¾ã™ï¼š

### 1. æ¥ç¶šç¢ºç«‹
```typescript
const ws: WebSocket = new WebSocket('wss://echo.websocket.org');

// æ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèª
console.log(ws.readyState); // 0 (CONNECTING)
```

### 2. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®è¨­å®š
```typescript
ws.onopen = (event: Event): void => {
  console.log('æ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã¾ã—ãŸ');
  console.log(ws.readyState); // 1 (OPEN)
};

ws.onmessage = (event: MessageEvent<string>): void => {
  console.log('å—ä¿¡:', event.data);
};

ws.onclose = (event: CloseEvent): void => {
  console.log(`æ¥ç¶šçµ‚äº† (code: ${event.code})`);
  console.log(ws.readyState); // 3 (CLOSED)
};

ws.onerror = (event: Event): void => {
  console.error('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', event);
};
```

### 3. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
```typescript
// æ¥ç¶šãŒç¢ºç«‹ã—ã¦ã‹ã‚‰é€ä¿¡
if (ws.readyState === WebSocket.OPEN) {
  ws.send('Hello WebSocket!');
}
```

## ğŸ¯ WebSocketãŒæ´»èºã™ã‚‹å ´é¢

### ä¸»è¦ãª11ã‚«ãƒ†ã‚´ãƒªãƒ¼

1. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªï¼ˆDiscordã€Slackï¼‰
2. **å…±åŒç·¨é›†**: Google Docsã€Figmaã€VS Code Live Share
3. **é€šçŸ¥ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ**: åœ¨åº«æ›´æ–°ã€ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆ
4. **ãƒ‡ãƒ¼ã‚¿é…ä¿¡**: æ ªä¾¡ã€ç‚ºæ›¿ã€ã‚¹ãƒãƒ¼ãƒ„ãƒ©ã‚¤ãƒ–ã‚¹ã‚³ã‚¢
5. **IoTé€£æº**: ã‚¹ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ ã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿
6. **PWAçµ±åˆ**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã€ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
7. **ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: æ•™è‚²ç”¨ã€ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
8. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æº**: GraphQL Subscriptionsã€RPC
9. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ç›£æŸ»**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›£è¦–ã€ãƒ­ã‚°ç®¡ç†
10. **é‡‘èãƒ»åŒ»ç™‚**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¼•ã€æ‚£è€…ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
11. **VR/ãƒ¡ã‚¿ãƒãƒ¼ã‚¹**: ã‚¢ãƒã‚¿ãƒ¼åŒæœŸã€ç©ºé–“å…±æœ‰

### é©ã•ãªã„å ´é¢
- **é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é…ä¿¡**: ç”»åƒã€CSSã€JSãƒ•ã‚¡ã‚¤ãƒ«
- **ä¸€æ–¹å‘ãƒ‡ãƒ¼ã‚¿å–å¾—**: REST APIã§ååˆ†ãªå ´åˆ
- **ä½é »åº¦æ›´æ–°**: æ•°æ™‚é–“ã«1å›ç¨‹åº¦ã®æ›´æ–°

## ğŸ“ æ¼”ç¿’1: æ¥ç¶šçŠ¶æ…‹ã®ç†è§£

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®`readyState`ã®å€¤ã‚’äºˆæ¸¬ã—ã¦ãã ã•ã„ï¼š

```typescript
const ws = new WebSocket('wss://echo.websocket.org');
console.log('A:', ws.readyState); // ?

ws.onopen = () => {
  console.log('B:', ws.readyState); // ?
  ws.close();
};

ws.onclose = () => {
  console.log('C:', ws.readyState); // ?
};
```

**ç­”ãˆ**: A: 0 (CONNECTING), B: 1 (OPEN), C: 3 (CLOSED)

## ğŸƒâ€â™€ï¸ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼WebSocketã®åŸºæœ¬æ¦‚å¿µã¨TypeScriptã§ã®å®Ÿè£…æ–¹æ³•ã‚’ç†è§£ã§ãã¾ã—ãŸã€‚

æ¬¡ã®ç« ã§ã¯ã€WebSocketã‚’å–ã‚Šå·»ããƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æŠ€è¡“ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã™ã€‚

---

**é€²æ—**: Chapter 1 å®Œäº† ğŸ‰